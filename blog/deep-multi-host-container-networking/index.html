<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=false><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#FFFFFF"><title>Containers from Scratch: Deep Dive into Multi-Host Container Networking (Part II) &#183; ZawZaw.blog</title><meta name=title content="Containers from Scratch: Deep Dive into Multi-Host Container Networking (Part II) &#183; ZawZaw.blog"><script type=text/javascript src=/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="></script><link type=text/css rel=stylesheet href=/css/main.bundle.min.691b1673d0d9022f462f5f98bd6ca00492c6e4c0e50db74eb87a0c955ca519e6.css integrity="sha256-aRsWc9DZAi9GL1+YvWygBJLG5MDlDbdOuHoMlVylGeY="><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.b12db54fe4fd63c368e6b158b4b2797a26b991caa7be79569621b72604d64d6a.js integrity="sha256-sS21T+T9Y8No5rFYtLJ5eia5kcqnvnlWliG3JgTWTWo=" data-copy=Copy data-copied=Copied></script><meta name=description content="
      
        
      
    "><link rel=canonical href=/blog/deep-multi-host-container-networking/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="/blog/deep-multi-host-container-networking/"><meta property="og:site_name" content="ZawZaw.blog"><meta property="og:title" content="Containers from Scratch: Deep Dive into Multi-Host Container Networking (Part II)"><meta property="og:description" content="Publishes on Container technology & networking, Kubernetes, and personal experiences."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-05-25T00:00:00+00:00"><meta property="article:modified_time" content="2025-05-25T00:00:00+00:00"><meta property="article:tag" content="Containers"><meta property="article:tag" content="Networking"><meta property="og:image" content="/blog/deep-multi-host-container-networking/feature.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/blog/deep-multi-host-container-networking/feature.png"><meta name=twitter:title content="Containers from Scratch: Deep Dive into Multi-Host Container Networking (Part II)"><meta name=twitter:description content="Publishes on Container technology & networking, Kubernetes, and personal experiences."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","articleSection":"BLOG","name":"Containers from Scratch: Deep Dive into Multi-Host Container Networking (Part II)","headline":"Containers from Scratch: Deep Dive into Multi-Host Container Networking (Part II)","inLanguage":"en","url":"\/blog\/deep-multi-host-container-networking\/","author":{"@type":"Person","name":"Zaw Zaw"},"copyrightYear":"2025","dateCreated":"2025-05-25T00:00:00\u002b00:00","datePublished":"2025-05-25T00:00:00\u002b00:00","dateModified":"2025-05-25T00:00:00\u002b00:00","keywords":["containers","networking"],"mainEntityOfPage":"true","wordCount":"3083"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"/","name":"Welcome to Zaw Zaw.blog","position":1},{"@type":"ListItem","item":"/blog/","name":"Blog","position":2},{"@type":"ListItem","name":"Containers From Scratch Deep Dive Into Multi Host Container Networking ( Part Ii)","position":3}]}</script><meta name=author content="Zaw Zaw"><link href=mailto:zawzthein@outlook.com rel=me><link href=https://github.com/thezawzaw rel=me><link href=https://www.linkedin.com/in/thezawzaw rel=me><link href=https://www.facebook.com/thezawzaww rel=me><link href=https://www.instagram.com/thezawzaw rel=me><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel=stylesheet></head><body class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden"><nav class="flex items-start justify-between sm:items-center"><div class="z-40 flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>ZawZaw.blog</a></div><label id=menu-button for=menu-controller class="block sm:hidden"><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper class="invisible fixed inset-0 z-30 m-auto h-full w-full cursor-default overflow-auto bg-neutral-100/50 opacity-0 backdrop-blur-sm transition-opacity dark:bg-neutral-900/50"><ul class="mx-auto flex w-full max-w-7xl list-none flex-col overflow-visible px-6 py-6 text-end sm:px-14 sm:py-10 sm:pt-10 md:px-24 lg:px-32"><li class=mb-1><span class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class="group mb-1"><a href=/ title="Welcome to ZawZaw.blog" onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">HOME</span></a></li><li class="group mb-1"><a href=/blog/ title=BLOG onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">BLOG</span></a></li><li class="group mb-1"><a href=/tags/ title=TOPICS onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">TOPICS</span></a></li><li class="group mb-1"><a href=/photography/ title=PHOTOGRAPHY onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">PHOTOGRAPHY</span></a></li><li class="group mb-1"><a href=/about/ title=ABOUT onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">ABOUT</span></a></li><li class="group mb-1"><a href=/subscribe/ title="Subscribe to the Newsletter" onclick=close_menu()><span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Subscribe</span></a></li><li class="group mb-1"><a href=https://github.com/thezawzaw title onclick=close_menu() target=_blank><span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a></li><li class="group mb-1"><button id=search-button-1 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"></span></button></li></ul></div></label><ul class="hidden list-none flex-row text-end sm:flex"><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/ title="Welcome to ZawZaw.blog"><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">HOME</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/blog/ title=BLOG><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">BLOG</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/tags/ title=TOPICS><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">TOPICS</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/photography/ title=PHOTOGRAPHY><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">PHOTOGRAPHY</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/about/ title=ABOUT><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">ABOUT</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/subscribe/ title="Subscribe to the Newsletter"><span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Subscribe</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=https://github.com/thezawzaw title target=_blank><span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><button id=search-button-2 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"></span></button></li></ul></nav></header><div class="relative flex grow flex-col"><main id=main-content class=grow><article><header class=max-w-prose><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/>Welcome to ZawZaw.blog</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/blog/>BLOG</a><span class="px-1 text-primary-500">/</span></li><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/blog/deep-multi-host-container-networking/>Containers from Scratch: Deep Dive into Multi-Host Container Networking (Part II)</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Containers from Scratch: Deep Dive into Multi-Host Container Networking (Part II)</h1><div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2025-05-25 00:00:00 +0000 UTC">25 May 2025</time><span class="px-2 text-primary-500">&#183;</span><span>3083 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">15 mins</span><span class="px-2 text-primary-500">&#183;</span>
<span class=mb-[2px]><a href=https://github.com/thezawzaw/thezawzaw.github.io/tree/main/content/blog/2025-05-25-deep-multi-host-container-net/index.md class="text-lg hover:text-primary-500" rel="noopener noreferrer" target=_blank title="Edit content"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M490.3 40.4c21.9 21.87 21.9 57.33.0 79.2l-30 30.1-98-97.98 30.1-30.06C414.3-.2135 449.7-.2135 471.6 21.66L490.3 40.4zM172.4 241.7 339.7 74.34l98 97.96L270.3 339.6C264.2 345.8 256.7 350.4 248.4 353.2l-88.8 29.6C150.1 385.6 141.5 383.4 135 376.1 128.6 370.5 126.4 361 129.2 352.4l29.6-88.8C161.6 255.3 166.2 247.8 172.4 241.7v0zM192 63.1c17.7.0 32 15.23 32 32 0 18.6-14.3 32-32 32H96c-17.67.0-32 15.2-32 32V416c0 17.7 14.33 32 32 32H352c17.7.0 32-14.3 32-32V319.1c0-16.8 14.3-32 32-32s32 15.2 32 32V416c0 53-43 96-96 96H96c-53.02.0-96-43-96-96V159.1c0-53 42.98-96 96-96h96z"/></svg></span></a></span></div><div class="my-1 flex flex-wrap text-xs leading-relaxed text-neutral-500 dark:text-neutral-400"><a href=/tags/containers/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Containers</a>
<a href=/tags/networking/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Networking</a></div></div><div class=prose><picture class="mb-6 rounded-md"><source srcset="/blog/deep-multi-host-container-networking/feature_hu_9e45524d5f44d642.webp 330w,/blog/deep-multi-host-container-networking/feature_hu_704f8a7e22fded47.webp 660w
,/blog/deep-multi-host-container-networking/feature_hu_ffdf7434815c7865.webp 1024w
,/blog/deep-multi-host-container-networking/feature_hu_8196e8bde67ee5ca.webp 1320w" sizes=100vw type=image/webp><img width=1948 height=1285 class="mb-6 rounded-md" src=/blog/deep-multi-host-container-networking/feature_hu_ef68122461e9ca7c.png srcset="/blog/deep-multi-host-container-networking/feature_hu_93e69c58d0841f6d.png 330w,/blog/deep-multi-host-container-networking/feature_hu_ef68122461e9ca7c.png 660w
,/blog/deep-multi-host-container-networking/feature_hu_7baaa1f4b7baf2e8.png 1024w
,/blog/deep-multi-host-container-networking/feature_hu_a92f193d36a0277f.png 1320w" sizes=100vw></picture></div></header><section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row"><div class="order-first px-0 lg:order-last lg:max-w-xs lg:ps-8"><div class="toc pe-5 lg:sticky lg:top-10 print:hidden"><details open class="-ms-5 mt-0 overflow-hidden rounded-lg ps-5"><summary class="block cursor-pointer bg-neutral-100 py-1 ps-5 text-lg font-semibold text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="border-s border-dotted border-neutral-300 py-2 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#summary-objectives>Summary: Objectives</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#overview-of-multi-host-container-networking>Overview of Multi-host Container Networking</a></li><li><a href=#whats-vxlan-and-how-it-works>What&rsquo;s VXLAN and How it Works</a><ul><li><a href=#use-cases>Use Cases</a></li><li><a href=#vxlan-components>VXLAN Components</a></li><li><a href=#how-vxlan-works>How VXLAN Works</a></li></ul></li><li><a href=#multi-host-container-networking-from-scratch>Multi-Host Container Networking from Scratch</a><ul><li><a href=#how-it-works>How it Works</a></li><li><a href=#on-host-1-debian-linux-vm>On Host (1) Debian Linux VM</a></li><li><a href=#on-host-2-amazon-linux-vm>On Host (2) Amazon Linux VM</a></li></ul></li><li><a href=#testing-network-connectivity>Testing Network Connectivity</a></li></ul></nav></div></details></div></div><div class="min-h-0 min-w-0 max-w-prose grow"><p>This article is Part II of the previously published article, <a href=https://www.zawzaw.blog/posts/deep-dive-single-host-container-net target=_blank rel=noreferrer>Containers from Scratch: Deep Dive into Single-Host Container Networking</a>. In Part I, you&rsquo;ve learned how two containers communicate on the same single host, also known as <strong>Single-host</strong> container networking.</p><p>In this article, Part II, you&rsquo;ll learn how Containers <em>(Container A and Container B)</em> running on two different hosts (VMs) communicate and interact with each other using VXLAN networking, also known as <strong>Multi-host</strong> container networking, and I&rsquo;ll also demonstrate how Multi-host container networking works at the underlying layer with built-in Linux command-line tools.</p><h2 id=summary-objectives class="relative group">Summary: Objectives <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#summary-objectives aria-label=Anchor>#</a></span></h2><p><em>What you&rsquo;ll learn in this article:</em></p><ul><li><p>Basic Multi-Host Networking concepts</p></li><li><p>Basic Concepts of Kubernetes CNI (Container Network Interface) plugins</p></li><li><p>What&rsquo;s VXLAN (Virtual eXtensible Local-Area Network) and how it works</p></li><li><p>How Containers running on Different Hosts communicate and interact using VXLAN networking</p></li></ul><h2 id=prerequisites class="relative group">Prerequisites <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#prerequisites aria-label=Anchor>#</a></span></h2><p>Before you begin, make sure you&rsquo;ve installed the following tools:</p><ul><li>Linux-based Two VMs (or) Servers</li><li>Basic Networking Concepts</li><li>Familiar with Linux networking tools, such as <code>ip</code> and <code>brctl</code></li></ul><hr><h2 id=overview-of-multi-host-container-networking class="relative group">Overview of Multi-host Container Networking <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#overview-of-multi-host-container-networking aria-label=Anchor>#</a></span></h2><p>You&rsquo;ve previously learned how two containers communicate on the same single host, only one host (or) VM, also known as Single-host container networking. For example, Docker single host.</p><blockquote><p>In Multi-host container networking facilitated by overlay networks, containers running on the different hosts (or) VMs can communicate with each other in the same network. Sometimes, we refer to it as Multi-node (or) Cluster networking. For example, Docker Swarm mode, Kubernetes.</p></blockquote><p>Technically, we can use two different networking methods for Multi-host container networking.</p><ul><li><p><strong>VXLAN (Virtual eXtensible Local-Area Network)</strong> is a tunneling protocol or network virtualization technology that provides tunneling a virtual Layer 2 network (overlay network) over the Layer 3 network (underlay network).</p></li><li><p><strong>Direct Routing (also known as Native or Simple Routing)</strong> is the Linux kernel&rsquo;s built-in capabilities for forwarding network packets between different networks, rather than using specific software or network protocols. That means it&rsquo;s no encapsulation, no overlay network. It&rsquo;s just simple IP routing.</p></li></ul><p>For Example, the following Kubernetes CNI (Container Network Interface) plugins use different networking modes. But some Kubernetes CNIs provide both VXLAN (Encapsulation) and Direct Routing (or Native Routing) modes.</p><ul><li><p><a href=https://github.com/flannel-io/flannel/ target=_blank rel=noreferrer>Flannel</a>: VXLAN is the default networking mode of Flannel.</p></li><li><p><a href=https://docs.tigera.io/calico/ target=_blank rel=noreferrer>Calico</a>: Calico&rsquo;s default networking mode is BGP (Border Gateway Protocol) or Direct Routing, but you can also use the VXLAN networking mode.</p></li><li><p><a href=https://docs.cilium.io/en/stable/ target=_blank rel=noreferrer>Cilium</a>: Cilium also provides both VXLAN and Direct Routing (or Native Routing) modes. But the default networking mode is VXLAN or tunnel mode, also known as encapsulation mode.</p></li><li><p><a href=https://www.kube-router.io/docs/ target=_blank rel=noreferrer>Kube-router</a>: The default networking mode of Kube-router is BGP or Direct Routing (or Native Routing) as the main routing mechanism and so on.</p></li></ul><p>You can see the CNI full list on <a href="https://github.com/containernetworking/cni?tab=readme-ov-file#3rd-party-plugins" target=_blank rel=noreferrer>https://github.com/containernetworking/cni?tab=readme-ov-file#3rd-party-plugins</a>.</p><p>In this article, I will focus on <strong>VXLAN Networking</strong> to demonstrate Multi-host container networking from scratch.</p><hr><h2 id=whats-vxlan-and-how-it-works class="relative group">What&rsquo;s VXLAN and How it Works <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#whats-vxlan-and-how-it-works aria-label=Anchor>#</a></span></h2><p><figure><img src=/assets/images/featured-images/img_vxlan_diagram.png alt=vxlan-diagram class="mx-auto my-0 rounded-md"></figure><em>Photo Credit to: RedHat Developers (developers.redhat.com)</em></p><p><strong>VXLAN (Virtual eXtensible Local-Area Network)</strong> is a tunneling protocol or network virtualization technology that provides for creating a virtual Layer 2 network (overlay network) over the Layer 3 network (underlay network).</p><ul><li><p><strong>An Overlay Network</strong> is a virtual or logical network built on top of an existing physical network (also known as underlay network). It provides services, such as network virtualization, segmentation, and tunneling. For examples; VPNs, VXLAN.</p></li><li><p><strong>An Underlay Network</strong> is the physical network infrastructure that provides the actual connectivity. For example; network routers, switches.</p></li></ul><p>VXLAN encapsulates the Layer 2 Ethernet frames into UDP packets. This enables Layer 2 network (the data link layer, e.g: switch) traffic to traverse a Layer 3 network (the network layer, e.g; router and IP address). It&rsquo;s especially used in data centers, cloud environments, scalable overlay networks for VMs, and containers.</p><h3 id=use-cases class="relative group">Use Cases <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#use-cases aria-label=Anchor>#</a></span></h3><p>There are example use cases of VXLAN:</p><ul><li>Cloud Networking — Connecting VMs across hosts.</li><li>Container Networking — Kubernetes CNI (Container Network Interface) plugins.</li></ul><h3 id=vxlan-components class="relative group">VXLAN Components <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#vxlan-components aria-label=Anchor>#</a></span></h3><p>There are key components of VXLAN:</p><ul><li><p><strong>VXLAN Tunnel Endpoint (VTEP)</strong>: This is the core component that performs the encapsulation and decapsulation of VXLAN packets. VTEPs can be physical network devices or virtual switches within hypervisors (e.g: VMware). Each VTEP has a unique IP address in the underlay network.</p></li><li><p><strong>VXLAN Network Identifier (VNI)</strong>: This is a 24-bit identifier that uniquely identifies each virtual network segment within the VXLAN overlay.</p></li><li><p><strong>Underlay Network</strong>: This is the physical network that VXLAN traffic traverses. It provides the routing infrastructure for the encapsulated VXLAN packets.</p></li><li><p><strong>Overlay Network</strong>: This is the virtual network created by VXLAN, running on top of the underlay physical network. It allows VMs (or Servers) to communicate.</p></li></ul><h3 id=how-vxlan-works class="relative group">How VXLAN Works <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#how-vxlan-works aria-label=Anchor>#</a></span></h3><p>Basically, <strong>VXLAN (Virtual eXtensible Local-Area Network)</strong> works by encapsulating L2 Ethernet frames in UDP/IP with VTEPs handling the mapping between virtual overlay and physical underlay networks.</p><p>Simple Usage:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ ip link add &lt;vx0&gt; <span class=nb>type</span> vxlan id <span class=m>100</span> <span class=nb>local</span> &lt;10.0.0.100&gt; remote &lt;10.0.0.200&gt; dev eth0 dstport <span class=m>4789</span>
</span></span></code></pre></div><h4 id=setup-1-frame-arrival class="relative group">Setup (1): Frame Arrival <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#setup-1-frame-arrival aria-label=Anchor>#</a></span></h4><ul><li>A VM or Server sends an Ethernet frame. For example, Host (A) ⟶ Host (B).</li><li>The frame reaches the local VTEP (VXLAN Tunnel Endpoint).</li></ul><h4 id=setup-2-encapsulation class="relative group">Setup (2): Encapsulation <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#setup-2-encapsulation aria-label=Anchor>#</a></span></h4><ul><li>The VTEP checks the VNI (VXLAN Network Identifier) and destination MAC address.</li><li>It then encapsulates the frame inside a UDP/IP packet:<ul><li>Outer Source IP: Local VTEP IP <code>10.0.0.100</code></li><li>Outer Destination IP: Remote VTEP IP <code>10.0.0.200</code></li><li>VNI: <code>100</code> (For example, <code>100</code>)</li><li>UDP Port: 4789 (The default VXLAN UDP port is <code>4789</code>)</li></ul></li></ul><h4 id=setup-3-underlay-forwarding class="relative group">Setup (3): Underlay Forwarding <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#setup-3-underlay-forwarding aria-label=Anchor>#</a></span></h4><ul><li>The encapsulated packet is sent over the physical (underlay) network.</li></ul><h4 id=setup-4-decapsulation-at-remote-vtep class="relative group">Setup (4): Decapsulation at Remote VTEP <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#setup-4-decapsulation-at-remote-vtep aria-label=Anchor>#</a></span></h4><ul><li>The remote VTEP (<code>10.0.0.200</code>) receives the packet.</li><li>Then, it checks the following:<ul><li>UDP Port: <code>4789</code> ⟶ identifies it as VXLAN.</li><li>VNI: <code>100</code> ⟶ determines which virtual network it belongs to.</li><li>The ethernet frame is delivered to the correct destination VM or server.</li></ul></li></ul><hr><h2 id=multi-host-container-networking-from-scratch class="relative group">Multi-Host Container Networking from Scratch <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#multi-host-container-networking-from-scratch aria-label=Anchor>#</a></span></h2><p>In this section,
I will focus on configuring the network for <em>Two Containers — Container A and Container B</em>, running on Two Different VMs (Hosts) to communicate with each other. Make sure you have two Linux VMs or servers. In this article, I will use two AWS EC2 Instances to demonstrate how Multi-Host Container networking works using the VXLAN networking mode.</p><p>Our project setup looks like this. Container A and Container B are running on Two different hosts.</p><ul><li>Container A (<code>10.0.0.100</code>) on Host (1) — Debian Linux VM (<code>172.31.89.40</code>)</li><li>Container B (<code>10.0.0.200</code>) on Host (2) — Amazon Linux VM (<code>172.31.94.69</code>)</li></ul><h3 id=how-it-works class="relative group">How it Works <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#how-it-works aria-label=Anchor>#</a></span></h3><p><figure><img src=/assets/images/featured-images/img_multi_host_container_networking.png alt="Multi-Host Container Networking Diagram" class="mx-auto my-0 rounded-md"></figure><em>Diagram on How Multi-Host Container Networking Works</em></p><ul><li><p><em>Container (A)</em> and <em>Container (B)</em> are running on two different hosts (Host 1 and Host 2).</p></li><li><p>VETH (Virtual Ethernet) pair <code>veth0</code>,<code>veth1</code> that connects the network between Host and Container in the same Linux network namespace. <code>veth0</code> on the Host machine and <code>veth1</code> on the container.</p></li><li><p>VXLAN (Virtual eXtensible Local-Area Network) creates a tunnel that connects Host (1) — Debian Linux VM and Host (2) — Amazon Linux VM.</p></li><li><p>Then, the Bridge network <code>br0</code> is a network switch that forwards network packets between VXLAN and VETH network interfaces. Then, Container (A) and Container (B) can communicate with each other.</p></li></ul><p><em>In the next section, you&rsquo;ll learn how to set up and configure the network in more detail.</em></p><hr><p><figure><img src=/assets/images/featured-images/img_multi_host_container_net_host1.png alt="Host 1" class="mx-auto my-0 rounded-md"></figure></p><h3 id=on-host-1-debian-linux-vm class="relative group">On Host (1) Debian Linux VM <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#on-host-1-debian-linux-vm aria-label=Anchor>#</a></span></h3><h4 id=configuring-container-network class="relative group">Configuring Container Network <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#configuring-container-network aria-label=Anchor>#</a></span></h4><p>Firstly, I will set up and configure the network for Container A on Host (1) — Debian Linux. For running Containers, we will use the Alpine Linux root filesystem image.</p><p>Make sure you familiar with how to run a Container from scratch with unshare, chroot tools and you&rsquo;ve learned how to run it in the previous article, Part I — Containers from Scratch: Deep Dive into Single-Host Container Networking.</p><p>Create a project directory and download the Alpine Linux root filesystem image. This setup is same as the previous (Part I) article.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ mkdir -p containers/alpine-linux
</span></span><span class=line><span class=cl>$ curl -LO https://dl-cdn.alpinelinux.org/alpine/v3.21/releases/x86_64/alpine-minirootfs-3.21.3-x86_64.tar.gz
</span></span></code></pre></div><p>Extract the alpine-minirootfs-3.21.3-x86_64.tar.gz tar file and clean up.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ tar -xzvf alpine-minirootfs-3.21.3-x86_64.tar.gz
</span></span><span class=line><span class=cl>$ rm alpine-minirootfs-3.20.2-x86_64.tar.gz
</span></span></code></pre></div><p>Project structure looks like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>~/containers/alpine-linux
</span></span><span class=line><span class=cl> ├── bin
</span></span><span class=line><span class=cl> ├── dev
</span></span><span class=line><span class=cl> ├── etc
</span></span><span class=line><span class=cl> ├── home
</span></span><span class=line><span class=cl> ├── lib
</span></span><span class=line><span class=cl> ├── media
</span></span><span class=line><span class=cl> ├── mnt
</span></span><span class=line><span class=cl> ├── opt
</span></span><span class=line><span class=cl> ├── proc
</span></span><span class=line><span class=cl> ├── root
</span></span><span class=line><span class=cl> ├── run
</span></span><span class=line><span class=cl> ├── sbin
</span></span><span class=line><span class=cl> ├── srv
</span></span><span class=line><span class=cl> ├── sys
</span></span><span class=line><span class=cl> ├── tmp
</span></span><span class=line><span class=cl> ├── usr
</span></span><span class=line><span class=cl> └── var
</span></span></code></pre></div><p>I will create and run Container A in an isolated PID (Process ID), mount, and network namespaces using the command-line tools, unshare, chroot.</p><blockquote><p>The following command creates a Container (Container A) that is fully PID, mount, and network isolated from the Host (OS) machine and then mounts the /proc virtual filesystem.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ <span class=nb>cd</span> ~/containers/alpine-linux
</span></span><span class=line><span class=cl>$ sudo unshare --pid --mount --net <span class=se>\
</span></span></span><span class=line><span class=cl>     -f chroot ./  <span class=se>\
</span></span></span><span class=line><span class=cl>     env -i <span class=nv>HOSTNAME</span><span class=o>=</span>alpine-linux <span class=se>\
</span></span></span><span class=line><span class=cl>     /bin/sh -c <span class=s2>&#34;mount -t proc proc /proc; exec /bin/sh;&#34;</span>
</span></span></code></pre></div><p>Then, open another terminal on the your Host machine and get the container process ID with the following command.</p><blockquote><p>The following command gets the current running container&rsquo;s PID and sets the environment variable and then I will use this ENV variable when configuring the container network.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ <span class=nb>export</span> <span class=nv>CONTAINER_PID</span><span class=o>=</span><span class=k>$(</span>ps -C sh -o <span class=nv>pid</span><span class=o>=</span> <span class=p>|</span> tr -d <span class=s1>&#39; &#39;</span><span class=k>)</span>
</span></span></code></pre></div><p>Then, create a VETH (Virtual Ethernet) network pair veth0, veth1 with the ip command-line tool.</p><blockquote><p>The following command creates a VETH pair veth0, veth1 and sets veth1 to the network namespace with the current running container PID and then brings veth0 up. The VETH device is like a local Ethernet tunnel, and a VETH pair consists of two interfaces — one in the host machine&rsquo;s network namespace and another one in the container&rsquo;s network namespace. In the above example, veth0 is in the host machine&rsquo;s Net namespace and veth1 is in the container&rsquo;s Net namesapce.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo ip link add veth0 <span class=nb>type</span> veth peer name veth1
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> veth1 netns <span class=si>${</span><span class=nv>CONTAINER_PID</span><span class=si>}</span>
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> dev veth0 up
</span></span></code></pre></div><p>Then, set the IP address of Container A by running the following command without entering into the container&rsquo;s shell.</p><blockquote><p>The following command sets the IP address 10.0.0.100 to the veth1 network interface, also known as Container A&rsquo;s IP address and brings lo, veth1 up. You can use nsenter to exec commands without entering the container&rsquo;s shell.</p></blockquote><p><strong>Container A&rsquo;s IP address</strong> ⟶ <code>10.0.0.100</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo nsenter --target <span class=si>${</span><span class=nv>CONTAINER_PID</span><span class=si>}</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  --mount <span class=se>\
</span></span></span><span class=line><span class=cl>  --net <span class=se>\
</span></span></span><span class=line><span class=cl>  --pid <span class=se>\
</span></span></span><span class=line><span class=cl>  chroot <span class=si>${</span><span class=nv>HOME</span><span class=si>}</span>/containers/alpine-linux <span class=se>\
</span></span></span><span class=line><span class=cl>  /bin/sh -c <span class=s2>&#34;ip addr add dev veth1 10.0.0.100/24; ip link set lo up; ip link set veth1 up&#34;</span>
</span></span></code></pre></div><p>Then, I will create a bridge network and attach veth0 to the bridge network with the following command.</p><blockquote><p>The following command creates a Bridge network interface named <code>br0</code>, attaches <code>veth0</code> to the <code>br0</code> bridge interface, sets the IP address, and brings it up. Make sure you create and configure the bridge network because we need to communicate between the Container and the Host machine. A bridge network is like a network switch that forwards packets between network interfaces that are connected to it.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ sudo ip link add br0 <span class=nb>type</span> bridge
</span></span><span class=line><span class=cl>$ sudo ip link <span class=nb>set</span> veth0 master br0
</span></span><span class=line><span class=cl>$ sudo ip addr add dev br0 10.0.0.1/24
</span></span><span class=line><span class=cl>$ sudo ip link <span class=nb>set</span> br0 up
</span></span></code></pre></div><h4 id=configuring-vxlan-network-interface class="relative group">Configuring VXLAN Network Interface <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#configuring-vxlan-network-interface aria-label=Anchor>#</a></span></h4><p>In this section, I will set up and configure VXLAN to create a tunnel between <em>Host (1) — Debian Linux VM</em> and <em>Host (2) — Amazon Linux VM</em>, and then you can communicate between Container A and Container B.</p><p>On the <strong>Host (1) Debian Linux VM</strong>, create a VXLAN interface with the ip command-line tool.</p><blockquote><p>The following command creates a VXLAN interface named <code>vxlan0</code> and brings it up. It creates a tunnel and connects two VMs or servers. Host (1) — Debian Linux VM (<code>172.31.89.40</code>) is local and Host (2) — Amazon Linux VM (<code>172.31.94.69</code>) is remote. Make sure you set the same VNI (id) on both Host (1) and Host (2).</p></blockquote><ul><li>Local IP Address ⟶ <code>172.31.89.40</code> (Debian Linux VM)</li><li>Remote IP Address ⟶ <code>172.31.94.69</code> (Amazon Linux VM)</li><li>VXLAN Network Identifier (VNI) ⟶ <code>100</code></li><li>Destination Port⟶ <code>4789</code> (Default UDP Port)</li><li>Network Interface (Device) ⟶ <code>enX0</code> (Ethernet network device on the Debian Linux VM)</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo ip link add vxlan0 <span class=se>\
</span></span></span><span class=line><span class=cl>  <span class=nb>type</span> vxlan <span class=se>\
</span></span></span><span class=line><span class=cl>  id <span class=m>100</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  <span class=nb>local</span> 172.31.89.40 <span class=se>\
</span></span></span><span class=line><span class=cl>  remote 172.31.94.69 <span class=se>\
</span></span></span><span class=line><span class=cl>  dstport <span class=m>4789</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  dev enX0 <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> vxlan0 up
</span></span></code></pre></div><p>Then, attach the <code>vxlan0</code> interface to the bridge network device with the following command.</p><blockquote><p>The following command attaches the vxlan0 interface to the br0 bridge network device. Previously, we&rsquo;ve created this bridge device and make sure you attach your VXLAN interface to the bridge network device. We need to forward packets or connect the VETH and VXLAN interfaces because it&rsquo;s necessary to communicate between Container A (running on Host 1) and Container B (running on Host 2).</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo ip link <span class=nb>set</span> vxlan0 master br0
</span></span></code></pre></div><p>Then, you can check it with the brctl command-line tool. Make sure your veth0 and vxlan0 are attached to the bridge br0 device.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ brctl show
</span></span><span class=line><span class=cl>bridge name     bridge id               STP enabled     interfaces
</span></span><span class=line><span class=cl>br0             8000.8aea1d11531b       no              veth0
</span></span><span class=line><span class=cl>                                                        vxlan0
</span></span></code></pre></div><hr><p><figure><img src=/assets/images/featured-images/img_multi_host_container-net_host2.png alt="Host 2" class="mx-auto my-0 rounded-md"></figure></p><h3 id=on-host-2-amazon-linux-vm class="relative group">On Host (2) Amazon Linux VM <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#on-host-2-amazon-linux-vm aria-label=Anchor>#</a></span></h3><h4 id=configuring-container-network-1 class="relative group">Configuring Container Network <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#configuring-container-network-1 aria-label=Anchor>#</a></span></h4><p>Same as the previous Host (1) setup, I will set up and configure the network for <strong>Container B</strong> on <strong>Host (2) — Amazon Linux</strong>. To create and run the container, we will use the Alpine Linux root filesystem image.</p><p>Create a project directory and download the Alpine Linux root filesystem image. This setup is same as the previous (Part I) article.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ mkdir -p containers/alpine-linux
</span></span><span class=line><span class=cl>$ curl -LO https://dl-cdn.alpinelinux.org/alpine/v3.21/releases/x86_64/alpine-minirootfs-3.21.3-x86_64.tar.gz
</span></span></code></pre></div><p>Extract the alpine-minirootfs-3.21.3-x86_64.tar.gz tar file and clean up.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ tar -xzvf alpine-minirootfs-3.21.3-x86_64.tar.gz
</span></span><span class=line><span class=cl>$ rm alpine-minirootfs-3.20.2-x86_64.tar.gz
</span></span></code></pre></div><p>Project structure looks like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>~/containers/alpine-linux
</span></span><span class=line><span class=cl> ├── bin
</span></span><span class=line><span class=cl> ├── dev
</span></span><span class=line><span class=cl> ├── etc
</span></span><span class=line><span class=cl> ├── home
</span></span><span class=line><span class=cl> ├── lib
</span></span><span class=line><span class=cl> ├── media
</span></span><span class=line><span class=cl> ├── mnt
</span></span><span class=line><span class=cl> ├── opt
</span></span><span class=line><span class=cl> ├── proc
</span></span><span class=line><span class=cl> ├── root
</span></span><span class=line><span class=cl> ├── run
</span></span><span class=line><span class=cl> ├── sbin
</span></span><span class=line><span class=cl> ├── srv
</span></span><span class=line><span class=cl> ├── sys
</span></span><span class=line><span class=cl> ├── tmp
</span></span><span class=line><span class=cl> ├── usr
</span></span><span class=line><span class=cl> └── var
</span></span></code></pre></div><p>I will create and run <strong>Container B</strong> in an isolated PID (Process ID), mount, and network namespaces using the command-line tools, unshare, chroot.</p><blockquote><p>This command creates a Container (Container B) that is fully PID, mount, and network isolated from the Host (OS) machine and then mounts the <code>/proc</code> virtual filesystem.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ <span class=nb>cd</span> ~/containers/alpine-linux
</span></span><span class=line><span class=cl>$ sudo unshare --pid --mount --net <span class=se>\
</span></span></span><span class=line><span class=cl>     -f chroot ./  <span class=se>\
</span></span></span><span class=line><span class=cl>     env -i <span class=nv>HOSTNAME</span><span class=o>=</span>alpine-linux <span class=se>\
</span></span></span><span class=line><span class=cl>     /bin/sh -c <span class=s2>&#34;mount -t proc proc /proc; exec /bin/sh;&#34;</span>
</span></span></code></pre></div><p>Then, open another terminal on the your Host machine and get the container process ID with the following command.</p><blockquote><p>This command gets the current running container&rsquo;s PID and sets the environment variable and then I will use this ENV variable when configuring the container network.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ <span class=nb>export</span> <span class=nv>CONTAINER_PID</span><span class=o>=</span><span class=k>$(</span>ps -C sh -o <span class=nv>pid</span><span class=o>=</span> <span class=p>|</span> tr -d <span class=s1>&#39; &#39;</span><span class=k>)</span>
</span></span></code></pre></div><p>Then, create a VETH (Virtual Ethernet) network pair veth0, veth1 with the ip command-line tool.</p><blockquote><p>This command creates a VETH pair veth0, veth1 and sets veth1 to the network namespace with the current running container PID and then brings veth0 up. The VETH device is like a local Ethernet tunnel, and a VETH pair consists of two interfaces — one in the host machine&rsquo;s network namespace and another one in the container&rsquo;s network namespace. In the above example, veth0 is in the host machine&rsquo;s Net namespace and veth1 is in the container&rsquo;s Net namesapce.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo ip link add veth0 <span class=nb>type</span> veth peer name veth1
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> veth1 netns <span class=si>${</span><span class=nv>CONTAINER_PID</span><span class=si>}</span>
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> dev veth0 up
</span></span></code></pre></div><p>Then, set the IP address of Container B by running the following command without entering into the container&rsquo;s shell.</p><blockquote><p>This command sets the IP address <code>10.0.0.200</code> to the veth1 network interface, also known as Container B&rsquo;s IP address and brings lo, veth1 up. You can use nsenter to exec commands without entering the container&rsquo;s shell.</p></blockquote><p><strong>Container B&rsquo;s IP address</strong> ⟶ <code>10.0.0.200</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo nsenter --target <span class=si>${</span><span class=nv>CONTAINER_PID</span><span class=si>}</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  --mount <span class=se>\
</span></span></span><span class=line><span class=cl>  --net <span class=se>\
</span></span></span><span class=line><span class=cl>  --pid <span class=se>\
</span></span></span><span class=line><span class=cl>  chroot <span class=si>${</span><span class=nv>HOME</span><span class=si>}</span>/containers/alpine-linux <span class=se>\
</span></span></span><span class=line><span class=cl>  /bin/sh -c <span class=s2>&#34;ip addr add dev veth1 10.0.0.200/24; ip link set lo up; ip link set veth1 up&#34;</span>
</span></span></code></pre></div><p>Then, I will create a bridge network and attach <code>veth0</code> to the bridge network with the following command.</p><blockquote><p>This command creates a Bridge network interface named <code>br0</code>, attaches <code>veth0</code> to the <code>br0</code> bridge interface, sets the IP address, and brings it up. Make sure you create and configure the bridge network because we need to communicate between the Container and the Host machine. A bridge network is like a network switch that forwards packets between network interfaces that are connected to it.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ sudo ip link add br0 <span class=nb>type</span> bridge
</span></span><span class=line><span class=cl>$ sudo ip link <span class=nb>set</span> veth0 master br0
</span></span><span class=line><span class=cl>$ sudo ip addr add dev br0 10.0.0.2/24
</span></span><span class=line><span class=cl>$ sudo ip link <span class=nb>set</span> br0 up
</span></span></code></pre></div><h4 id=configuring-vxlan-network-interface-1 class="relative group">Configuring VXLAN Network Interface <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#configuring-vxlan-network-interface-1 aria-label=Anchor>#</a></span></h4><p>In this section, I will set up and configure VXLAN to create a tunnel between <em>Host (1) — Debian Linux VM</em> and <em>Host (2) — Amazon Linux VM</em>, and then you can communicate between <em>Container A</em> and <em>Container B</em>.</p><p>Same as the previous Host (1) setup, on the <strong>Host (2) Amazon Linux VM</strong>, create a VXLAN interface with the ip command-line tool.</p><blockquote><p>This command creates a VXLAN interface named vxlan0 and brings it up. It creates a tunnel and connects two VMs or servers. In this setup, Host (2) — Amazon Linux VM (172.31.94.69) is local and Host (1) — Debian Linux VM (172.31.89.40) is remote. Make sure you set the same VNI (id) on both Host (1) and Host (2).</p></blockquote><ul><li>Local IP Address ⟶ <code>172.31.94.69</code> (Host 2 Amazon Linux VM)</li><li>Remote IP Address ⟶ <code>172.31.89.40</code> (Host 1 Debian Linux VM)</li><li>VXLAN Network Identifier (VNI) ⟶ <code>100</code></li><li>Destination Port ⟶ <code>4789</code> (Default UDP Port)</li><li>Network Interface (Device) ⟶ <code>enX0</code> (Ethernet network device on the Host 2 Amazon Linux VM)</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo ip link add vxlan0 <span class=se>\
</span></span></span><span class=line><span class=cl>  <span class=nb>type</span> vxlan <span class=se>\
</span></span></span><span class=line><span class=cl>  id <span class=m>100</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  <span class=nb>local</span> 172.31.94.69 <span class=se>\
</span></span></span><span class=line><span class=cl>  remote 172.31.89.40 <span class=se>\
</span></span></span><span class=line><span class=cl>  dstport <span class=m>4789</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  dev enX0 <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> vxlan0 up
</span></span></code></pre></div><p>Then, attach the <code>vxlan0</code> interface to the bridge network device with the following command.</p><blockquote><p>This command attaches the <code>vxlan0</code> interface to the <code>br0</code> bridge network device. Previously, we&rsquo;ve created this bridge device and make sure you attach your VXLAN interface to the bridge network device. We need to forward packets or connect the VETH and VXLAN interfaces because it&rsquo;s necessary to communicate between Container A (running on Host 1) and Container B (running on Host 2).</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo ip link <span class=nb>set</span> vxlan0 master br0
</span></span></code></pre></div><p>Then, you can check it with the brctl command-line tool. Make sure your <code>veth0</code> and <code>vxlan0</code> are attached to the bridge <code>br0</code> device.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ brctl show
</span></span><span class=line><span class=cl>bridge name     bridge id               STP enabled     interfaces
</span></span><span class=line><span class=cl>br0             8000.8aea1d11531b       no              veth0
</span></span><span class=line><span class=cl>                                                        vxlan0
</span></span></code></pre></div><hr><h2 id=testing-network-connectivity class="relative group">Testing Network Connectivity <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#testing-network-connectivity aria-label=Anchor>#</a></span></h2><p>Now, you&rsquo;ve configured the container network and VXLAN tunnel, and you can ping the containers&rsquo; IP addresses to confirm if it works.</p><p>Ping Container A (<code>10.0.0.100</code>) from the Host 2 (Amazon Linux VM).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ping 10.0.0.100
</span></span></code></pre></div><p>Ping Container B (<code>10.0.0.200</code>) from the Host 1 (Debian Linux VM).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ping 10.0.0.200
</span></span></code></pre></div><p>Reference Links:</p><ul><li><a href=https://blog.mbrt.dev/posts/container-network target=_blank rel=noreferrer>https://blog.mbrt.dev/posts/container-network</a></li><li><a href=https://labs.iximiuz.com/tutorials/container-networking-from-scratch target=_blank rel=noreferrer>https://labs.iximiuz.com/tutorials/container-networking-from-scratch</a></li><li><a href=https://developers.redhat.com/blog/2018/10/22/introduction-to-linux-interfaces-for-virtual-networking target=_blank rel=noreferrer>https://developers.redhat.com/blog/2018/10/22/introduction-to-linux-interfaces-for-virtual-networking</a></li></ul><hr><div class=not-prose><div class="max-w-lg mx-auto my-10"><script async src=https://subscribe-forms.beehiiv.com/embed.js></script><iframe src=https://subscribe-forms.beehiiv.com/80eeb668-c1d6-453d-982b-faff55875a4e class=beehiiv-embed data-test-id=beehiiv-embed frameborder=0 scrolling=no style="width:100%;height:365px;margin:0;border-radius:0 0 0 0!important;background-color:initial;box-shadow:0 0 #0000;max-width:100%"></iframe></div></div></div></section><footer class="max-w-prose pt-8 print:hidden"><div class=flex><picture class="!mb-0 !mt-0 me-4 w-24 h-auto rounded-full"><img width=533 height=533 class="!mb-0 !mt-0 me-4 w-24 h-auto rounded-full" alt="Zaw Zaw" loading=lazy decoding=async src=/img/author-profile.jpeg></picture><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Zaw Zaw</div><div class="text-sm text-neutral-700 dark:text-neutral-400">An SRE/platform engineer—loves writing and photography.</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=mailto:zawzthein@outlook.com target=_blank aria-label=Email rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://github.com/thezawzaw target=_blank aria-label=Github rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://www.linkedin.com/in/thezawzaw target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://www.facebook.com/thezawzaww target=_blank aria-label=Facebook rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://www.instagram.com/thezawzaw target=_blank aria-label=Instagram rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M224.1 141c-63.6.0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1.0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9.0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9.0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9.0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9.0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8.0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg></span></a></div></div></div></div><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="group flex" href=/blog/deep-single-host-container-networking/><span class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&larr;</span><span class="ltr:hidden rtl:inline">&rarr;</span></span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Containers from Scratch: Deep Dive into Single-Host Container Networking</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2025-03-15 00:00:00 +0000 UTC">15 March 2025</time>
</span></span></a></span><span></span></div></div></footer></article></main><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12" id=to-top hidden=true><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div><footer class="py-10 print:hidden"><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">© 2026 ZawZaw.blog</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://github.com/jpanther/congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="flex flex-row items-center"><div class="me-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher-0 type=button aria-label="appearance switcher"><div class="flex h-12 w-12 items-center justify-center dark:hidden" title="Switch to dark appearance"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="hidden h-12 w-12 items-center justify-center dark:flex" title="Switch to light appearance"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div></div></footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=/><div id=search-modal class="top-20 mx-auto flex min-h-0 w-full max-w-3xl flex-col rounded-md border border-neutral-200 bg-neutral shadow-lg dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex flex-none items-center justify-between px-2"><form class="flex min-w-0 flex-auto items-center"><div class="flex h-8 w-8 items-center justify-center text-neutral-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="mx-1 flex h-12 flex-auto appearance-none bg-transparent focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex h-8 w-8 items-center justify-center text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto overflow-auto px-2"><ul id=search-results></ul></section></div></div></div></body></html>